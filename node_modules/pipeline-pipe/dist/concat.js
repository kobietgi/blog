"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const readable_stream_1 = require("readable-stream");
function concat(size) {
    let buffered = [];
    return new readable_stream_1.Transform({
        objectMode: true,
        transform(chunk, enc, callback) {
            buffered.push(chunk);
            if (buffered.length >= size) {
                this.push(buffered);
                buffered = [];
            }
            callback();
        },
        flush(callback) {
            if (buffered.length > 0) {
                const b = buffered;
                buffered = [];
                callback(undefined, b);
                return;
            }
            callback(undefined, null);
        },
    });
}
exports.default = concat;
